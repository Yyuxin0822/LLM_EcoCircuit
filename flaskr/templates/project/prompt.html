{% extends 'base.html' %}
{% block scripts %}
<link rel="stylesheet" href="{{ url_for('static', filename='prompt.css') }}">
<script type="module" src="{{ url_for('static', filename='SystemBar.js') }}" defer></script>
<script type="module" src="{{ url_for('static', filename='prompt.js') }}" defer></script>
{% endblock %}

{% block content %}
<div class="user-page">
  <div class="wrapper">
    <div class="content-wrapper">
      <div class="sub-wrapper">
        {% if g.user %}
        <div class="heading-0"> Hi, <span style="color: #9847FD;">{{ g.user['username'] }}</span>!
          <br>What design engineering project do you want to explore today?
        </div>
        {% endif %}
        <div class="heading-2">Empowered by LLM, EcoCircuit generates a mind map with systematic thinking following the
          classic engineering model with inputs, outputs, processes, co-optimization, and feedback / regeneration, to
          provide users ideas to later doodle on.</div>
      </div>
      <div class="sub-wrapper-2">
        <div class="instruct-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" width="23" height="22" viewBox="0 0 23 22" fill="none">
            <path
              d="M5.5 20H9.5C9.5 21.1 8.6 22 7.5 22C6.4 22 5.5 21.1 5.5 20ZM3.5 19H11.5V17H3.5V19ZM15 9.5C15 13.32 12.34 15.36 11.23 16H3.77C2.66 15.36 0 13.32 0 9.5C0 5.36 3.36 2 7.5 2C11.64 2 15 5.36 15 9.5ZM13 9.5C13 6.47 10.53 4 7.5 4C4.47 4 2 6.47 2 9.5C2 11.97 3.49 13.39 4.35 14H10.65C11.51 13.39 13 11.97 13 9.5ZM19.87 7.37L18.5 8L19.87 8.63L20.5 10L21.13 8.63L22.5 8L21.13 7.37L20.5 6L19.87 7.37ZM17.5 6L18.44 3.94L20.5 3L18.44 2.06L17.5 0L16.56 2.06L14.5 3L16.56 3.94L17.5 6Z"
              fill="black" />
          </svg>
          <div class="heading-2">This phase I am looking to</div>
        </div>
        <div class="prompt-frame">
          <div class="frame-wrapper" id="modal-description-activate">
            <div class="component-wrapper">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="27" viewBox="0 0 22 25" fill="#FFF;">
                <path
                  d="M13.6522 3.44499L19.5556 9.88499V22.1117H2.44444V3.44499H13.6522ZM13.6522 0.77832H2.44444C1.1 0.77832 0 1.97832 0 3.44499V22.1117C0 23.5783 1.1 24.7783 2.44444 24.7783H19.5556C20.9 24.7783 22 23.5783 22 22.1117V9.88499C22 9.17832 21.7433 8.49832 21.2789 8.00499L15.3756 1.56499C14.9233 1.05832 14.3 0.77832 13.6522 0.77832ZM4.88889 16.7783H17.1111V19.445H4.88889V16.7783ZM4.88889 11.445H17.1111V14.1117H4.88889V11.445ZM4.88889 6.11165H13.4444V8.77832H4.88889V6.11165Z"
                  fill="white" />
              </svg>
              <div class="component-text">Start by describing with text</div>
            </div>
          </div>
          <div class="frame-wrapper" id="modal-img-activate">
            <div class="component-wrapper">
              <svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 25 25" fill="#FFF;">
                <path
                  d="M22 3.44499V22.1117H3.33332V3.44499H22ZM22 0.77832H3.33332C1.86666 0.77832 0.666656 1.97832 0.666656 3.44499V22.1117C0.666656 23.5783 1.86666 24.7783 3.33332 24.7783H22C23.4667 24.7783 24.6667 23.5783 24.6667 22.1117V3.44499C24.6667 1.97832 23.4667 0.77832 22 0.77832ZM15.52 12.5917L11.52 17.7517L8.66666 14.2983L4.66666 19.445H20.6667L15.52 12.5917Z"
                  fill="white" />
              </svg>
              <div class="component-text">Start by uploading an image</div>
            </div>
          </div>
          <div class="frame-wrapper" id="modal-label-activate">
            <div class="component-wrapper">
              <svg xmlns="http://www.w3.org/2000/svg" width="27" height="27" viewBox="0 0 25 25" fill="#FFF;">
                <path
                  d="M4.75443 14.0415C4.05969 14.0415 3.49127 14.6099 3.49127 15.3046C3.49127 15.9994 4.05969 16.5678 4.75443 16.5678C5.44916 16.5678 6.01758 15.9994 6.01758 15.3046C6.01758 14.6099 5.44916 14.0415 4.75443 14.0415ZM4.75443 19.0941C4.05969 19.0941 3.49127 19.6625 3.49127 20.3573C3.49127 21.052 4.05969 21.6204 4.75443 21.6204C5.44916 21.6204 6.01758 21.052 6.01758 20.3573C6.01758 19.6625 5.44916 19.0941 4.75443 19.0941ZM4.75443 8.98885C4.05969 8.98885 3.49127 9.55727 3.49127 10.252C3.49127 10.9467 4.05969 11.5152 4.75443 11.5152C5.44916 11.5152 6.01758 10.9467 6.01758 10.252C6.01758 9.55727 5.44916 8.98885 4.75443 8.98885ZM0.964953 9.62043C0.611269 9.62043 0.333374 9.89832 0.333374 10.252C0.333374 10.6057 0.611269 10.8836 0.964953 10.8836C1.31864 10.8836 1.59653 10.6057 1.59653 10.252C1.59653 9.89832 1.31864 9.62043 0.964953 9.62043ZM4.75443 3.93621C4.05969 3.93621 3.49127 4.50464 3.49127 5.19937C3.49127 5.89411 4.05969 6.46253 4.75443 6.46253C5.44916 6.46253 6.01758 5.89411 6.01758 5.19937C6.01758 4.50464 5.44916 3.93621 4.75443 3.93621ZM23.7018 10.8836C24.0555 10.8836 24.3334 10.6057 24.3334 10.252C24.3334 9.89832 24.0555 9.62043 23.7018 9.62043C23.3481 9.62043 23.0702 9.89832 23.0702 10.252C23.0702 10.6057 23.3481 10.8836 23.7018 10.8836ZM14.8597 6.46253C15.5544 6.46253 16.1228 5.89411 16.1228 5.19937C16.1228 4.50464 15.5544 3.93621 14.8597 3.93621C14.165 3.93621 13.5965 4.50464 13.5965 5.19937C13.5965 5.89411 14.165 6.46253 14.8597 6.46253ZM14.8597 2.04148C15.2134 2.04148 15.4913 1.76358 15.4913 1.4099C15.4913 1.05622 15.2134 0.77832 14.8597 0.77832C14.506 0.77832 14.2281 1.05622 14.2281 1.4099C14.2281 1.76358 14.506 2.04148 14.8597 2.04148ZM0.964953 14.6731C0.611269 14.6731 0.333374 14.951 0.333374 15.3046C0.333374 15.6583 0.611269 15.9362 0.964953 15.9362C1.31864 15.9362 1.59653 15.6583 1.59653 15.3046C1.59653 14.951 1.31864 14.6731 0.964953 14.6731ZM9.80706 23.5152C9.45337 23.5152 9.17548 23.7931 9.17548 24.1467C9.17548 24.5004 9.45337 24.7783 9.80706 24.7783C10.1607 24.7783 10.4386 24.5004 10.4386 24.1467C10.4386 23.7931 10.1607 23.5152 9.80706 23.5152ZM9.80706 2.04148C10.1607 2.04148 10.4386 1.76358 10.4386 1.4099C10.4386 1.05622 10.1607 0.77832 9.80706 0.77832C9.45337 0.77832 9.17548 1.05622 9.17548 1.4099C9.17548 1.76358 9.45337 2.04148 9.80706 2.04148ZM9.80706 6.46253C10.5018 6.46253 11.0702 5.89411 11.0702 5.19937C11.0702 4.50464 10.5018 3.93621 9.80706 3.93621C9.11232 3.93621 8.5439 4.50464 8.5439 5.19937C8.5439 5.89411 9.11232 6.46253 9.80706 6.46253ZM9.80706 13.4099C8.75864 13.4099 7.91232 14.2562 7.91232 15.3046C7.91232 16.3531 8.75864 17.1994 9.80706 17.1994C10.8555 17.1994 11.7018 16.3531 11.7018 15.3046C11.7018 14.2562 10.8555 13.4099 9.80706 13.4099ZM19.9123 14.0415C19.2176 14.0415 18.6492 14.6099 18.6492 15.3046C18.6492 15.9994 19.2176 16.5678 19.9123 16.5678C20.6071 16.5678 21.1755 15.9994 21.1755 15.3046C21.1755 14.6099 20.6071 14.0415 19.9123 14.0415ZM19.9123 19.0941C19.2176 19.0941 18.6492 19.6625 18.6492 20.3573C18.6492 21.052 19.2176 21.6204 19.9123 21.6204C20.6071 21.6204 21.1755 21.052 21.1755 20.3573C21.1755 19.6625 20.6071 19.0941 19.9123 19.0941ZM19.9123 8.98885C19.2176 8.98885 18.6492 9.55727 18.6492 10.252C18.6492 10.9467 19.2176 11.5152 19.9123 11.5152C20.6071 11.5152 21.1755 10.9467 21.1755 10.252C21.1755 9.55727 20.6071 8.98885 19.9123 8.98885ZM19.9123 3.93621C19.2176 3.93621 18.6492 4.50464 18.6492 5.19937C18.6492 5.89411 19.2176 6.46253 19.9123 6.46253C20.6071 6.46253 21.1755 5.89411 21.1755 5.19937C21.1755 4.50464 20.6071 3.93621 19.9123 3.93621ZM23.7018 14.6731C23.3481 14.6731 23.0702 14.951 23.0702 15.3046C23.0702 15.6583 23.3481 15.9362 23.7018 15.9362C24.0555 15.9362 24.3334 15.6583 24.3334 15.3046C24.3334 14.951 24.0555 14.6731 23.7018 14.6731ZM14.8597 19.0941C14.165 19.0941 13.5965 19.6625 13.5965 20.3573C13.5965 21.052 14.165 21.6204 14.8597 21.6204C15.5544 21.6204 16.1228 21.052 16.1228 20.3573C16.1228 19.6625 15.5544 19.0941 14.8597 19.0941ZM14.8597 23.5152C14.506 23.5152 14.2281 23.7931 14.2281 24.1467C14.2281 24.5004 14.506 24.7783 14.8597 24.7783C15.2134 24.7783 15.4913 24.5004 15.4913 24.1467C15.4913 23.7931 15.2134 23.5152 14.8597 23.5152ZM9.80706 8.35727C8.75864 8.35727 7.91232 9.20358 7.91232 10.252C7.91232 11.3004 8.75864 12.1467 9.80706 12.1467C10.8555 12.1467 11.7018 11.3004 11.7018 10.252C11.7018 9.20358 10.8555 8.35727 9.80706 8.35727ZM9.80706 19.0941C9.11232 19.0941 8.5439 19.6625 8.5439 20.3573C8.5439 21.052 9.11232 21.6204 9.80706 21.6204C10.5018 21.6204 11.0702 21.052 11.0702 20.3573C11.0702 19.6625 10.5018 19.0941 9.80706 19.0941ZM14.8597 13.4099C13.8113 13.4099 12.965 14.2562 12.965 15.3046C12.965 16.3531 13.8113 17.1994 14.8597 17.1994C15.9081 17.1994 16.7544 16.3531 16.7544 15.3046C16.7544 14.2562 15.9081 13.4099 14.8597 13.4099ZM14.8597 8.35727C13.8113 8.35727 12.965 9.20358 12.965 10.252C12.965 11.3004 13.8113 12.1467 14.8597 12.1467C15.9081 12.1467 16.7544 11.3004 16.7544 10.252C16.7544 9.20358 15.9081 8.35727 14.8597 8.35727Z"
                  fill="white" />
              </svg>
              <div class="component-text">Start by poping up ideas</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div> <!-- end of prompt-i-o -->

<div id="modal-popup-prompt">
  <!-- start of modal-text-->
  <div class="modal-description" id="modal-description">
    <span class="icon-common icon-close icon-prompt-close"></span>
    <div class="frame">
      <div class="sub-frame-1">
        <span class='icon-common icon-description'></span>
        <span role="textbox" class="description" id="description" contenteditable></span>
      </div>
      <div class="system-frame">
        <!--  <span class="icon-common icon-unknown"></span> -->
        <span class="stopper">|</span>
        <span class="normal">Customize System</span>
      </div>
      <div class="sub-frame-2">
        <div id="component-dont-expand-description">
          <div class="component-bar-2">
            <span class='icon-common icon-blank'></span>
            <p>Expand Description with AI</p>
          </div>
        </div>
        <div id="component-expand-description" class="hidden">
          <div class="component-bar-selected">
            <span class='icon-common icon-tik'></span>
            <p>Expand Description with AI</p>
          </div>
        </div>
        <div class="component-wrapper" id="generate-text">
          <svg xmlns="http://www.w3.org/2000/svg" width="19" height="25" viewBox="0 0 19 25" fill="none">
            <path
              d="M9.5 19.7L12.7538 18.188L14.25 14.9L15.7462 18.188L19 19.7L15.7462 21.212L14.25 24.5L12.7538 21.212L9.5 19.7Z"
              fill="white" />
            <path
              d="M9.3575 9.956L7.125 14.9L4.8925 9.956L0 7.7L4.8925 5.444L7.125 0.5L9.3575 5.444L14.25 7.7L9.3575 9.956Z"
              fill="white" />
          </svg>
          <div class="component-text">Generate</div>
        </div>
      </div>
    </div>
  </div> <!-- end of modal-text-->

  <!-- start of modal-img -->
  <div class="modal-img" id="modal-img">
    <span class='icon-common icon-close icon-prompt-close'></span>
    <div class="frame">
      <form method="POST" action="/prompt" enctype="multipart/form-data">
        <div class="sub-frame-1">
          <span class='icon-common icon-upload' id="icon-upload"></span>
          <input type="file" id="image-upload" name="image" accept="image/*" style="display: none;">
          <img id="preview-img" src="#" alt="Image preview..." style="display: none; max-width: 100%;">
          <label for="image-upload" class="custom-file-upload normal" style="cursor: pointer;">Browse File To
            Upload</label>
        </div>
        <div class="sub-frame-2">
          <div id="system-bar-default" class="system-bar-default">
            <div class="system-frame">
              <!-- <span class="icon-common icon-water"></span>
              <span class="icon-common icon-bio"></span>
              <span class="icon-common icon-unknown"></span>
              <span class="icon-common icon-ict"></span>
              <span class="icon-common icon-solidwaste"></span>
              <span class="icon-common icon-energy"></span>
              <span class="icon-common icon-transport"></span> -->
              <span class="stopper">|</span>
              <span class="normal">Customize System</span>
            </div>
          </div>
          <div class="component-wrapper" id="generate-img">
            <svg xmlns="http://www.w3.org/2000/svg" width="19" height="25" viewBox="0 0 19 25" fill="none">
              <path
                d="M9.5 19.7L12.7538 18.188L14.25 14.9L15.7462 18.188L19 19.7L15.7462 21.212L14.25 24.5L12.7538 21.212L9.5 19.7Z"
                fill="white" />
              <path
                d="M9.3575 9.956L7.125 14.9L4.8925 9.956L0 7.7L4.8925 5.444L7.125 0.5L9.3575 5.444L14.25 7.7L9.3575 9.956Z"
                fill="white" />
            </svg>
            <div class="component-text">Generate</div>
          </div>
        </div>
      </form>
    </div>
  </div> <!-- end of modal-img -->

  <!-- start of modal-label -->
  <div class="modal-label" id="modal-label">
    <span class='icon-common icon-close icon-prompt-close'></span>
    <div class="frame">
      <div class="sub-frame-1">
        <div class="component-bar-custom card-14">POTABLE WATER</div>
        <div class="component-bar-custom card-14">WASTEWATER TREATMENT PLANT</div>
        <div class="component-bar-custom card-14">FIRE SUPPRESSION</div>
        <div class="component-bar-custom card-14">NON-POTABLE WATER</div>
        <div class="component-bar-custom card-14">BIOFUEL</div>
        <div class="component-bar-custom card-14">HVAC</div>
        <div class="component-bar-custom card-14">LIGHTS</div>
        <div class="component-bar-custom card-14">SUCCULENTS</div>
        <div class="component-bar-custom card-14">WETLAND</div>
        <div class="component-bar-custom card-14">URBAN FARM</div>
        <div class="component-bar-custom card-14" id="custom" contenteditable></div>
      </div>
      <div class="sub-frame-2">
        <div id="system-bar-default" class="system-bar-default">
          <!-- <div class="project-system-default hidden" id="project-system-default">
            {"HYDRO": "#0BF", "ENERGY": "#FC0", "SOLID WASTE": "#A75",
            "TELECOMMUNICATION": "#95A", "MOBILITY": "#F44",
            "BIOSYSTEM": "#3C4", "UNKNOWN": "#888"}</div> -->
          <div class="system-frame">
            <!-- <span class="icon-common icon-water"></span>
            <span class="icon-common icon-bio"></span>
            <span class="icon-common icon-unknown"></span>
            <span class="icon-common icon-ict"></span>
            <span class="icon-common icon-solidwaste"></span>
            <span class="icon-common icon-energy"></span>
            <span class="icon-common icon-transport"></span> -->
            <span class="stopper">|</span>
            <span class="normal">Customize System</span>
          </div>
        </div>
        <div class="component-wrapper" id="generate-label">
          <svg xmlns="http://www.w3.org/2000/svg" width="19" height="25" viewBox="0 0 19 25" fill="none">
            <path
              d="M9.5 19.7L12.7538 18.188L14.25 14.9L15.7462 18.188L19 19.7L15.7462 21.212L14.25 24.5L12.7538 21.212L9.5 19.7Z"
              fill="white" />
            <path
              d="M9.3575 9.956L7.125 14.9L4.8925 9.956L0 7.7L4.8925 5.444L7.125 0.5L9.3575 5.444L14.25 7.7L9.3575 9.956Z"
              fill="white" />
          </svg>
          <div class="component-text">Generate</div>
        </div>
      </div>
    </div>
  </div> <!-- end of modal-label -->

</div>

<div id="modal-popup-system">
  <!-- start of modal-system -->
  <div class="modal-system" id="modal-system">
    <span class='icon-common icon-close' id="icon-close-system"></span>
    <div class="frame">
      <div class="sub-frame-1">
        <div class="syslist-wrapper">
          <div class="wrapper" id="syslist">
            <!-- <div class="sysfunc">
              <div class="sysicon" id="hydro"><span class="icon-common icon-water"></span></div>
              <p>HYDRO</p>
            </div> -->
            <div class="normal modalbtn" id="addnew">+ Add New</div>
          </div>
        </div>
        <div class="icon-editer stopper">
          <div id="colorPicker"></div>
          <!-- <form id="icon-form" method="POST" action="/" enctype="multipart/form-data">
            <input type="file" id="customicon-upload" name="icon" accept="image/svg+xml" style="display: none;">
            <label for="customicon-upload" class="modalbtn normal" style="cursor: pointer;">+ Upload Icon (.svg)</label>
          </form> -->
        </div>
      </div>
      <div class="sub-frame-2">
        <div class="component-bar-2">
          <span class='icon-common icon-add'></span>
          <div id="set-system" class="set-system emphasis"
            style="cursor: pointer;text-align: center; border: none; background-color: transparent;">
            Set System</div>
        </div>
        <div class="normal modalbtn" id="reset-system">+ Reset System</div>
      </div>
    </div>
  </div>
  <!-- end of modal-system -->
</div>
{% endblock %}